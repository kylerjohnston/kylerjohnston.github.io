<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Kyle R. Johnston - Blog</title>
    
<meta name="description" content="Kyle Johnston is a coder, teacher, writer, and a researcher of 19th-century British literature. He blogs about the intersection of coding and literary studies.">

    <link rel="stylesheet" href="/pygments.css">
    
    <link rel="stylesheet" href="/static/gen/packed.css?0bd594b8">
    
    <link rel="icon" type="image/png" href="/static/img/favicons/favicon-196x196.png" sizes="196x196">
    <link rel="icon" type="image/png" href="/static/img/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/static/img/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="alternate" href="kylerjohnston.com/blog/" hreflang="en-us">
    
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header_left">
          <a href="/blog/" class="name_nav">KYLE R. JOHNSTON</a>
        </div>
        <div class="header_right">
          <ul class="nav">
            <li class="nav"><a href="/blog/" class="nav" id="nav">Blog</a></li>
            <li class="nav"><a href="/archive/" class="nav" id="nav">Archive</a></li>
            <li class="nav"><a href="/about/" class="nav" id="nav">About</a></li>
            <li class="nav"><a href="/recent.atom" class="atom" id="nav"><i class="fa fa-rss-square"></i></a></li>
          </ul>
        </div>
        <div class="menu">
          <ul class="nav">
            <li class="nav"><a href="/blog/" class="nav" id="nav">Blog</a></li>
            <li class="nav"><a href="/archive/" class="nav" id="nav">Archive</a></li>
            <li class="nav"><a href="/about/" class="nav" id="nav">About</a></li>
            <li class="nav"><a href="/recent.atom" class="nav" id="nav"><i class="fa fa-rss-square"></i> Atom Feed</a></li>
          </ul>
        </div>
        <div class="menu-button">
          <button id="menu-open"><i class="fa fa-bars"></i></button>
          <button id="menu-close"><i class="fa fa-times"></i></button>
        </div>
      </div>
      
  <section>
    
      <article>
        <h1 class="heading"><a href="/posts/do-i-go-to-the-grocery-store-too-much/" class="post_title">A story about shopping for groceries</a></h1>
        <small class="heading">
          9 October 2016
          <ul class="tags">
            
            <li class="tags"><a class="tags" href="/tags/hannaford/">#hannaford</a></li>
            
          </ul>
        </small>
        <small class="heading"><i class="fa fa-comment"></i> <a href="/posts/do-i-go-to-the-grocery-store-too-much/#disqus_thread" class="comment" data-disqus-identifier="do-i-go-to-the-grocery-store-too-much">Comments</a></small>
        <p>When I was growing up in the beatific suburbs of Connecticut, my mother would make weekly trips on Sunday to the Big Y and, occasionally, to Costco. Sometimes I would go with her. These were my introductions to grocery shopping. It rarely seemed to work well. My mother&rsquo;s work took her out of town three, sometimes four nights a week. Sundays she would cook dinner; the rest of the week my step-dad and I would eat leftovers, make frozen pizza, or go to Friendly&rsquo;s. When the next weekend came around, my mother would throw out all the rotten produce and moldy bread she&rsquo;d bought the prior week before heading out for another trip to the Big Y.</p>
<p>It seemed wasteful. I was in high school when Michael Pollan&rsquo;s <em>Omnivore&rsquo;s Dilemma</em> and <em>In Defense of Food</em> came out. I didn&rsquo;t read them nor was I aware of them, as far as I remember, but I watched <em>Food Inc.</em> and Anthony Bourdain and started to really appreciate the importance of food. I wanted to learn cook. I found recipes on the internet and tutorials on YouTube and I would go to the grocery store&mdash;Stop N Shop now, because it was closer than Big Y&mdash;with lists of all the ingredients I needed to make a single a meal. I&rsquo;d come home and make much more than I could ever eat. I cooked based on recipes. I didn&rsquo;t know how to plan meals around the ingredients I already had, so the coconut milk or the half can of chopped tomatoes I bought would be spoiled by the time I ever wanted to use it again&mdash;<em>if</em> I ever wanted to use it again.</p>
<p>My first semester of college I lived in a dorm and ate a lot of fast food and peanut butter sandwiches. After that semester I started commuting to school. I had a kitchen, and I drove by three grocery stores on the way to and from school. I was better at cooking by this point. I had meals I regularly cooked. I knew how to make things based on the ingredients I had on hand. But I was living alone, and I was a skinny kid (I still am). I wanted to cook with fresh produce, but fresh food spoils. If I went grocery shopping once a week, my produce would go bad before I could eat it all. So I started going to the grocery store every other day and buying just the produce and the protein I would need for the next day or two. It was a system that worked for me. The grocery store was on my way home, I was using fresh produce, and nothing was being wasted.</p>
<p>Two and a half years ago my girlfriend moved in with me. My grocery shopping habits perplexed her. Why are you going to the grocery store, she would ask me, when you just went two days ago? She was from a once-a-week-shopper family. I kept shopping, but I wondered if, maybe, it wasn&rsquo;t the most efficient system. Maybe I go to the grocery store too much.</p>
<h2>Figuring out how often I really go to the store</h2>
<p>For a little over a year, I&rsquo;ve been keeping meticulous records of all of my spending which allows me to see exactly when, where, and how much I&rsquo;m spending on groceries.</p>
<p><img alt="Figure 1. Grocery purchases, 17 July 2015&amp;ndash;7 October 2016." src="/static/img/posts/grocery_purchases.png" /></p>
<p>I&rsquo;ve taken 167 grocery trips between 17 July 2015 and 7 October 2016. 167 trips in 448 days makes for a rough average of one grocery trip every 2.6826347 days, or about every 2 days, 16 hours, and 23 minutes. For a little more accuracy, I wrote a quick Python function to calculate the average number of days between trips.</p>
<div class="codehilite"><pre><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="nb">reduce</span>

<span class="k">def</span> <span class="nf">avg_day_difference</span><span class="p">(</span><span class="n">grocery_trips</span><span class="p">):</span>
  <span class="c"># Make a list of just the dates of the grocery trips</span>
  <span class="n">dates</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s">&#39;Date&#39;</span><span class="p">],</span> 
    <span class="s">&#39;%m/</span><span class="si">%d</span><span class="s">/%Y&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span> <span class="n">grocery_trips</span><span class="p">))</span>

  <span class="c"># Sort it in reverse chronological order, most recent date first</span>
  <span class="n">dates</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

  <span class="c"># Make a list of the time differences between each transaction</span>
  <span class="n">day_differences</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
      <span class="n">day_differences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dates</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">dates</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>

  <span class="c"># Return the mean</span>
  <span class="k">return</span> <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">day_differences</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">day_differences</span><span class="p">)</span>
</pre></div>


<p>The slightly more accurate calculation shows I make a grocery trip, on average, every 2 days, 16 hours, and 46 minutes.</p>
<p>Not all of these trips are necessarily for produce or food, though. In my budget, I categorize as &ldquo;grocery&rdquo; any spending on consumable household stuff. That includes food, but it also includes things like toilet paper and paper towels, cleaning supplies, and bathroom supplies like toothpaste, soap, shampoo, etc. I also include alcohol in my grocery budget. In the plot below, I&rsquo;ve included only conventional &ldquo;grocery stores.&rdquo;</p>
<p><img alt="Figure 2. Purchases from grocery stores,  17 July 2015&amp;ndash;7 October 2016." src="/static/img/posts/grocery_store_purchases.png" /></p>
<p>I&rsquo;ve gone on 158 trips to grocery stores, averaging 2 days, 20 hours, and 29 minutes between trips. So I go every two or three days. Which is about what I thought.</p>
<h2>Is this too much?</h2>
<p>According to the Food Marketing Institute, &ldquo;the trade association that serves as the voice of food retail,&rdquo; the average U.S. consumer made 1.6 trips to the supermarket per week in 2016.<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup> So I&rsquo;m going to the store more than the average consumer. Is that a bad thing? I&rsquo;m not sure. It seems like it&rsquo;s working to me.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p><a href="http://www.fmi.org/docs/default-source/webinars/fmi-2016-us-grocery-shopper-trends-overview-webinar5ce7030324aa67249237ff0000c12749.pdf?sfvrsn=2">&ldquo;U.S. Grocery Shopping Trends, 2016.&rdquo; Food Marketing Institute. Hartman Group. 2016.</a> (pdf link)&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
      </article>
    
      <article>
        <h1 class="heading"><a href="/posts/how-big-of-a-truck-do-i-need/" class="post_title">How big of a truck will I need to move all my stuff?</a></h1>
        <small class="heading">
          11 April 2016
          <ul class="tags">
            
            <li class="tags"><a class="tags" href="/tags/javascript/">#javascript</a></li>
            
          </ul>
        </small>
        <small class="heading"><i class="fa fa-comment"></i> <a href="/posts/how-big-of-a-truck-do-i-need/#disqus_thread" class="comment" data-disqus-identifier="how-big-of-a-truck-do-i-need">Comments</a></small>
        <p>In a couple months I&rsquo;m going to finish my Master&rsquo;s degree, and then I&rsquo;m going to be moving cross-country. I&rsquo;ve accumulated a lot of <em>stuff</em> over the years. I&rsquo;ve been trying to get rid of a lot of it lately&mdash;selling off <a href="https://www.discogs.com/seller/RoddyPowers/profile">my records</a> and my books and furniture I&rsquo;m not going to need&mdash;but there&rsquo;s still enough stuff that I&rsquo;m going to have to rent a truck to make the move.</p>
<p>The question is how big of a truck I&rsquo;m going to need. Penske has a 12 ft.-truck with <code>450 cu. ft.</code> of loading space and a 16 ft.-truck with <code>800 cu. ft.</code> of loading space for the same price. Before I reserve a truck, I want to get a sense of how much stuff I&rsquo;m actually moving: though they&rsquo;re both the same price, I&rsquo;d rather drive the smaller truck cross-country if it&rsquo;s possible.</p>
<p>So I opened up Google Docs, got out a tape measure, and made a spreadsheet of the dimensions of all of the things I might want to move them. You can see the complete spreadsheet as a CSV file <a href="/static/data/moving_data.csv">here</a>. Geometry was never my strongest subject, but this seems like a problem easy enough to get a handle on with some simple code.</p>
<p>I read the CSV file into a Javascript object and wrote some quick functions to calculate the cubic footage of each item and sum a specific property in an array of objects.</p>
<div class="codehilite"><pre><span class="kd">function</span> <span class="nx">parseFields</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="nx">i</span><span class="p">.</span><span class="nx">Thing</span><span class="p">,</span>
      <span class="nx">height</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">Height</span><span class="p">),</span>
      <span class="nx">length</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">Length</span><span class="p">),</span>
      <span class="nx">width</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">Width</span><span class="p">),</span>
      <span class="nx">cubicFeet</span><span class="o">:</span> <span class="nx">cuInToCuFt</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">Height</span> <span class="o">*</span> <span class="nx">i</span><span class="p">.</span><span class="nx">Width</span> <span class="o">*</span> <span class="nx">i</span><span class="p">.</span><span class="nx">Length</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">cuInToCuFt</span><span class="p">(</span><span class="nx">cuIn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">cuIn</span> <span class="o">/</span> <span class="mi">1728</span><span class="p">);</span> <span class="c1">// Round up; be conservative in our estimation</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">sumProperty</span><span class="p">(</span><span class="nx">prop</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">[</span><span class="nx">prop</span><span class="p">];</span>
  <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>It turns out I have <code>370 cubic feet</code> of stuff. That&rsquo;s good! Volume-wise, it can all fit in the smaller 12 ft.-truck.</p>
<p>I probably won&rsquo;t be able to (and certainly won&rsquo;t want to) stack everything floor-to-ceiling in the truck, so it&rsquo;s a good idea to see what the total footprint of all of this stuff is too. The 12 ft.-truck has interior dimensions of <code>12 ft. X 6 ft. 6 in. X 6 ft. 1 in.</code> That makes for about <code>78 sq. ft.</code> of floor space. The 16 ft.-truck, at <code>16 ft. X 7 ft. 7 in. X 6 ft. 6 in.</code> has about <code>121 sq. ft.</code> of floor space.</p>
<p>I edited my map function above to calculate the square footage of all the things too.</p>
<div class="codehilite"><pre><span class="kd">function</span> <span class="nx">parseFields</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="nx">i</span><span class="p">.</span><span class="nx">Thing</span><span class="p">,</span>
      <span class="nx">height</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">Height</span><span class="p">),</span>
      <span class="nx">length</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">Length</span><span class="p">),</span>
      <span class="nx">width</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">Width</span><span class="p">),</span>
      <span class="nx">cubicFeet</span><span class="o">:</span> <span class="nx">cuInToCuFt</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">Height</span> <span class="o">*</span> <span class="nx">i</span><span class="p">.</span><span class="nx">Width</span> <span class="o">*</span> <span class="nx">i</span><span class="p">.</span><span class="nx">Length</span><span class="p">),</span>
<span class="hll">      <span class="nx">squareFeet</span><span class="o">:</span> <span class="nx">sqInToSqFt</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">Width</span> <span class="o">*</span> <span class="nx">i</span><span class="p">.</span><span class="nx">Length</span><span class="p">)</span>
</span>    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">sqInToSqFt</span><span class="p">(</span><span class="nx">sqIn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">sqIn</span> <span class="o">/</span> <span class="mi">144</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>If we sum that, we find our stuff has a footprint, spread in a single layer, of about <code>182 sq. ft.</code></p>
<p>This is obviously an overestimation of the amount of floor space stuff will take up in the truck. I calculate floor space as <code>width * length</code>, but some of the items (mattress and box spring, for example) will be stood on end during transit, taking up a lot less space; my function also rounds up to the next square foot. Still, as a conservative estimate this works&mdash;better to end up with a truck that&rsquo;s a little too big than one that&rsquo;s a little too small.</p>
<p>Based on this I think I&rsquo;m going to reserve the 16 ft.-truck. It is going to be a little more cumbersome to drive and use a bit more fuel, but it will be easier to load and I won&rsquo;t have to stack things as much and risk things falling in transit.</p>
      </article>
    
      <article>
        <h1 class="heading"><a href="/posts/introducing-todayiread/" class="post_title">Introducing: Today I Read</a></h1>
        <small class="heading">
          29 February 2016
          <ul class="tags">
            
            <li class="tags"><a class="tags" href="/tags/webdev/">#webdev</a></li>
            
            <li class="tags"><a class="tags" href="/tags/projects/">#projects</a></li>
            
          </ul>
        </small>
        <small class="heading"><i class="fa fa-comment"></i> <a href="/posts/introducing-todayiread/#disqus_thread" class="comment" data-disqus-identifier="introducing-todayiread">Comments</a></small>
        <p>Yesterday I launched <a href="https://todayiread.xyz">todayiread.xyz</a>. Today I Read&hellip; is a lightweight app designed to help users keep track of what they&rsquo;re reading and visualize their reading habits.</p>
<p>I&rsquo;ve been working on Today I Read&hellip; over the past two weekends. I used to use Goodreads when I was in college, but I&rsquo;ve found that Goodreads doesn&rsquo;t really work well with the kinds of reading I do in grad school. I don&rsquo;t read many books: I read lots of chapters and journal articles, and I want a way to keep track of those. I also want a way to visualize my reading habits&mdash;reading is basically my job right now, and I want to make sure I&rsquo;m keeping up with it. Plus, charts look cool.</p>
<p><img alt="Today I Read screenshot" src="/static/img/project-screenshots/todayiread-screenshot-home.png" /></p>
<p>I made Today I Read&hellip; to solve these problems. Check it out! Maybe you&rsquo;ll find it helpful too. It&rsquo;s a little rough around the edges now&mdash;like I said, I hacked it over basically four days&mdash;but it&rsquo;s functional, and I&rsquo;m going to be working on improving it more over the next few weeks. You can <a href="http://github.com/kylerjohnston/todayiread">view the source code on Github</a>.</p>
<p>You can also access your reading data in JSON format via Today I Read&hellip;&rsquo;s API, so I&rsquo;ll be writing a post analyzing my reading habits some time in the future&hellip;</p>
      </article>
    
      <article>
        <h1 class="heading"><a href="/posts/the-pleasure-of-the-txt/" class="post_title">The pleasure of the TXT: Writing in plain text in the humanities</a></h1>
        <small class="heading">
          16 February 2016
          <ul class="tags">
            
            <li class="tags"><a class="tags" href="/tags/humanities/">#humanities</a></li>
            
            <li class="tags"><a class="tags" href="/tags/writing/">#writing</a></li>
            
          </ul>
        </small>
        <small class="heading"><i class="fa fa-comment"></i> <a href="/posts/the-pleasure-of-the-txt/#disqus_thread" class="comment" data-disqus-identifier="the-pleasure-of-the-txt">Comments</a></small>
        <p>Microsoft Word is the de facto standard application for writing in the humanities. We write, collaborate, and disseminate our works in <code>.docx</code> format. There are lots of things I dislike about Word: its lack of portability, for one, and how it forces you to be tied into the Microsoft ecosystem, or how easily the formatting of an entire document can get messed up by dropping in a single figure or table. The biggest problem with Word, though, is that it just doesn’t match up with the way we write. Writing and typesetting are different, distinct parts of the writing process, but in Word they are combined into one task. As we write we must also always be formatting, thinking not just about our words but about how they will appear on the paper. We fiddle with fonts and line spacing and ligatures when we should be getting down words.</p>
<p>This is a really <em>weird</em> writing ecosystem. For years our colleagues on the opposite side of campus&mdash;the scientists and the engineers and the mathematicians&mdash;have been typesetting their papers using a free program called <a href="https://en.wikipedia.org/wiki/LaTeX">LaTeX</a>. LaTeX is a markup language&mdash;like HTML&mdash;that lets you write your papers in plain text files that you can edit with any text editor. Then, when you’re done writing, you can typeset document using any number of nice-looking templates that you can proofread and send off to review in any number of formats. This makes it really easy to quickly produce differently formatted versions of your paper: a version to turn into your seminar professor, a version to submit to journals, a version to post on your blog, whatever.</p>
<p>LaTeX is overkill for most of what we write in the humanities. LaTeX is great if you want to typset complex-looking mathematical equations&mdash;that’s why  STEM people love it&mdash;but its syntax is overly complex for the kinds of things we typically write in the humanities. Instead, we can draw on LaTeX&rsquo;s write first, format later model but write in the simpler <a href="https://daringfireball.net/projects/markdown/syntax">Markdown</a> markup language. Even if you’ve never heard the term “Markdown,” you probably recognize its syntax from emails or internet message board posts: a word or phrase wrapped in <code>*single asterisks*</code> is <em>italicized</em>; <code>**double asterisks**</code> make text <strong>bold</strong>. You can find a more detailed guide to the syntax elsewhere, but realistically you probably won’t be using too much beyond what I just demonstrated in your humanities papers.</p>
<h2>How I write</h2>
<p>For the rest of this post, I’m going to describe my particular set up for writing in the humanities. I write <em>everything</em> in Markdown&mdash;from seminar papers and syllabi to lesson plans, notes, and this blog post&mdash;and rely on the powerful <a href="http://pandoc.org">Pandoc</a> utility to convert my Markdown files into formatted documents&mdash;mostly PDFs and HTML files.</p>
<h3>Prerequisites</h3>
<p>I write on a mid-2012 Macbook Pro. My instructions below are specific to OS X, but all of the tools I mention are cross-platform and a similar set up could be configured on any system. You&rsquo;ll need the following things:</p>
<ul>
<li>
<p><strong>A plain text editor</strong>. This can be something as simple as TextEdit on a Mac or Notepad on Windows. There are also, at least for OS X, several editors made specifically for editing markdown and targeted at writers, such as ByWord, iA Writer, and WriteRoom. If you don’t write code, these might be your best bets&mdash;I’ve had good results with ByWord in the past. More advanced options like Atom, Sublime Text, Emacs, and Vim will be more customizable and support advanced features like syntax highlighting and autocompletion.  I use Vim and MacVim because I&rsquo;ve invested time learning to use them but you should feel free to try out several editors&mdash;Vim has a steep (but rewarding!) learning curve, and you should use whatever editor works best for you.</p>
</li>
<li>
<p><strong>Pandoc</strong>. <a href="http://pandoc.org">Pandoc</a> is a utility that can convert Markdown documents to basically any other format you want. </p>
</li>
<li>
<p><strong>A LaTeX installation</strong>. Pandoc needs a LaTeX installation to convert your files to PDFs. If you’re on OS X, <a href="http://tug.org/mactex/">MacTeX</a> is what you want. The BasicTex package will suffice, but I’d recommend installing the <a href="http://amaxwell.github.io/tlutility/">TeX Live Utility</a> too if you go that route (it’s included with the full MacTeX package). After installing your TeX package, open the TeX Live Utility and update all packages.</p>
</li>
<li>
<p><strong>My MLA Pandoc templates</strong>. Pandoc still isn’t that popular of a tool in the humanities. I couldn’t find any MLA templates for Pandoc, so I made my own. They rely on the <a href="https://www.ctan.org/pkg/mla-paper">mla-paper</a> LaTeX package which comes with MacTeX. You can <a href="https://github.com/kylerjohnston/pandoc-templates">download them from Github</a>.</p>
</li>
<li>
<p><strong>An MLA Citation Style Language file</strong>. Pandoc uses this file to generate your citations. <a href="https://www.zotero.org/styles/modern-language-association">Here&rsquo;s a link to the MLA 7th Edition CSL file from the Zotero Style Repository</a>. Save this file to <code>~/.csl/modern-language-association.csl</code>. That&rsquo;s where Pandoc will look for it.</p>
</li>
<li>
<p><strong>A citation manager</strong>. Zotero, Mendeley, and EndNote seem to be the most popular. I use BibDesk&mdash;it comes with a full MacTeX install and it’s lightweight and easy to use.</p>
</li>
</ul>
<h3>Putting it all together</h3>
<p>Let’s imagine I’m writing a paper for an English graduate seminar. I start out by making a new directory for the project. </p>
<div class="codehilite"><pre>miltons-mistake/
</pre></div>


<p>I compile a bibliography for the project in BibTex and export it to the root of the project directory as a <code>.bib</code> file. You could also do this in Mendeley or Zotero.</p>
<div class="codehilite"><pre>miltons-mistake/
    miltons-mistake.bib
</pre></div>


<p>I make a <code>drafts/</code> directory and put my master Markdown file in it.</p>
<div class="codehilite"><pre>miltons-mistake/
    drafts/
        miltons-mistake.md
    miltons-mistake.bib
</pre></div>


<p><code>miltons-mistake.md</code> looks like this:</p>
<div class="codehilite"><pre>---
auth:
  first: Kyle
  last: Johnston
professor: Professor Smith
course: English 598
date: February 16, 2016
title: &quot;Milton&#39;s Mistake&quot;
bibliography: miltons-mistake.bib
csl: modern-language-association.csl
---

This is the body of your paper. You can cite stuff by referencing
the citation ID in your bib file, like so [@milton-Paradise 1.102].

New paragraphs are separated by a blank line.

At the end of your paper, type the following to generate a Works
Cited page from your bibliography using only sources you&#39;ve cited in
the paper.

\workscited
</pre></div>


<p>The metadata at the beginning of the file gives the template the necessary info to set up your document and tells Pandoc where to find your bibliography and what citation style to use.</p>
<p>I compile my formatted documents to another subdirectory, <code>out/</code>. Open a terminal, change to the project&rsquo;s root directory, and run:</p>
<div class="codehilite"><pre><span class="nv">$ </span>pandoc drafts/miltons-mistakes.md <span class="se">\</span>
  -o out/miltons-mistakes-seminar-02-16-16.pdf <span class="se">\</span>
  --latex-engine<span class="o">=</span>xelatex <span class="se">\</span>
  --template<span class="o">=</span>mla <span class="se">\</span>
  --filter pandoc-citeproc
</pre></div>


<p>The <code>-o out/miltons-mistake-seminar-02-16-16.pdf</code> flag tells Pandoc where to write the compiled document. <code>--latex-engine=xelatex</code> tells Pandoc to use XeLaTeX to compile the document. XeLaTeX ships with MacTeX&mdash;it has the advantage of being able to use your system fonts, something other LaTeX engines tend not to play nicely with. <code>--template=mla</code> tells Pandoc to use your MLA template. And finally <code>--filter pandoc-citeproc</code> will let Pandoc process your citations by passing them to its <code>pandoc-citeproc</code> tool.</p>
<p>Since this command is so long I usually save it to a build script that I can quickly run whenever I want to compile the document.</p>
<div class="codehilite"><pre><span class="c">#!/bin/bash</span>

pandoc drafts/miltons-mistakes.md <span class="se">\</span>
  -o out/miltons-mistakes-seminar-02-16-16.pdf <span class="se">\</span>
  --latex-engine<span class="o">=</span>xelatex <span class="se">\</span>
  --template<span class="o">=</span>mla <span class="se">\</span>
  --filter pandoc-citeproc
</pre></div>


<p>Save this in the project&rsquo;s root directory as <code>build.sh</code> and then you just run <code>$ ./build.sh</code> to compile your document.</p>
<p>That&rsquo;s it! The advantage of this approach is two-fold: you don&rsquo;t have to worry about formatting while you&rsquo;re writing, and once you have your document written it&rsquo;s simple to format it in any number of ways. I could export an MLA-style PDF for my professor, another PDF with a different citation style to submit to a journal, and an HTML file for my blog all from the same source document.</p>
      </article>
    
      <article>
        <h1 class="heading"><a href="/posts/what-makes-a-bestseller/" class="post_title">What makes a bestseller? Modeling literary prestige in the 19th and 20th centuries</a></h1>
        <small class="heading">
          08 February 2016
          <ul class="tags">
            
            <li class="tags"><a class="tags" href="/tags/text-mining/">#text-mining</a></li>
            
            <li class="tags"><a class="tags" href="/tags/literary-studies/">#literary-studies</a></li>
            
          </ul>
        </small>
        <small class="heading"><i class="fa fa-comment"></i> <a href="/posts/what-makes-a-bestseller/#disqus_thread" class="comment" data-disqus-identifier="what-makes-a-bestseller">Comments</a></small>
        <p>For the last semester, I’ve been working as a research assistant for <a href="http://tedunderwood.com">Ted Underwood</a> on a project aiming to model one form of literary prestige.<sup id="fnref:novel"><a class="footnote-ref" href="#fn:novel" rel="footnote">1</a></sup> This is part of a larger project Ted has been working on along with another research assistant, Jordan Sellers. In a <a href="http://tedunderwood.com/2015/05/18/how-quickly-do-literary-standards-change/">blog post from May last year</a> (and a forthcoming article in <em>MLQ</em>), Ted and Jordan ran a model on two samples of 19th-century poetry&mdash;one a sample of works which had been reviewed in prominent literary magazines, and one a sample of works randomly selected from the <a href="http://hathitrust.org">HathiTrust Digital Library</a>&mdash;to see if the prestige of the reviewed volumes would be evident in the texts of the works themselves (spoiler: it is).</p>
<p>I’ve been working with Ted to construct a model that would predict whether or not a work of fiction would be a bestseller in the nineteenth and twentieth centuries. Andrew Piper has been doing <a href="http://txtlab.org/?p=596">similar</a> <a href="http://txtlab.org/?p=608">work</a> at McGill University. Is “bestsellerliness” a purely social feature, or something we can identify in a text? How stable are the textual features that predict bestsellerliness over time? Can the same features that predict bestsellerliness in 1840 predict bestsellerliness in 1900 and 1960?</p>
<p>To answer these questions, we first needed to build a sample of bestselling works of fiction in America from the nineteenth and twentieth centuries. For information on twentieth-century bestsellers, we relied on John Unsworth’s <a href="http://unsworth.unet.brandeis.edu/courses/bestsellers/">20th-Century American Bestsellers database</a>. While Unsworth gives us clean lists of the top ten bestsellers by year in the twentieth century, information on nineteenth-century bestsellers is less comprehensive. I drew from a list of works compiled by Jordan, who had selected titles based on their inclusion in bibliographies by Richard Altick, Q. D. Leavis, and Alice Payne Hackett.<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">2</a></sup> Hackett notes that for works published before 1895, data on total sales is scarce and unreliable, not only because the systematic recording of bestsellers had not yet begun but also because each book was issued by several publishers, many no longer in existence and with inaccurate or incomplete sales records (Hackett 221).<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">3</a></sup> As such, pre-1895 bestsellers are not rigorously defined, nor is it possible to compile a &ldquo;top ten&rdquo; per year. Rather, we get a sampling of works published across the century which were known to have sold well. Leavis chooses works which are &ldquo;representative of the popular fiction&rdquo; of their time (331). Hackett identifies pre-1895 bestsellers as works &ldquo;which have without question sold a total of a million copies or more through the years&rdquo; (221).  In sum, we need to bear in mind that our nineteenth-century sample is less comprehensive than our twentieth-century sample and that it represents a sample of well-known, popular works more than a sample of bestsellers.</p>
<p>We sampled bestsellers from two databases of texts: the HathiTrust Digital Library and <a href="https://lucian.uchicago.edu/blogs/literarynetworks/">the Chicago Text Lab</a>. For each bestseller, we also sampled a random volume from the same database, published in the same year, by an author who did not appear anywhere on our bestseller list. All together we sampled 1316 works of fiction from the nineteenth and twentieth centuries.</p>
<p>Modeling this sample we get the following plot:</p>
<p><img alt="Figure 1. HathiTrust and Chicago Text Lab samples, 1800&amp;ndash;1990" src="/static/img/model-2-1.png" /></p>
<p>In the plot above, the y-axis represents the probability that a work is a bestseller. Actual bestsellers are plotted in red dots; randomly sampled works are grey +s.</p>
<p>There are a couple interesting things going on in this plot. First of all, we see that our model is particularly good at predicting the bestsellerliness of works from the first half of the twentieth century. We also see a significant upward trend in bestsellerliness across both centuries. This seems to suggest not only that at least some of the same textual qualities that can predict whether or not something will be a bestseller in the early nineteenth century can also predict whether or not something will be a bestseller in the twentieth century, but that, over time, these features become more common in fiction. This could be evidence for a kind of literary natural selection.</p>
<p>We have to interpret this plot cautiously, though. There are some important differences in the datasets the works we&rsquo;re modeling come from that complicate our results. We relied on HathiTrust for our nineteenth-century works and the Chicago Text Lab for our twentieth-century works. HathiTrust has a wide range of texts, ranging from the very popular to the <em>very</em> obscure. Chicago has fewer obscure works&mdash;most things in Chicago, while not necessarily bestsellers, sold well enough. The trend we are seeing in this plot, then, is most likely a difference in the obscurity of texts we&rsquo;re modeling in the nineteenth and twentieth centuries: our twentieth century sample contains fewer obscure, more popular texts.</p>
<p>To test this interpretation, I modeled the Chicago Text Lab texts on their own:</p>
<p><img alt="Figure 2. Chicago Text Lab sample, 1898&amp;ndash;1990" src="/static/img/chicago_only_whole_20thc.png" /></p>
<p>When we model only works drawn from the Chicago Text Lab, we see a <em>reverse trend</em> from what we saw in our whole model. Over the course of the twentieth century, works tend to contain <em>fewer</em> of the features that would mark them as bestsellers. This is weird stuff! It suggests a definite stylistic shift over the course of the twentieth century; what&rsquo;s popular in 1990 would not have been as popular in 1900.</p>
<p><img alt="Figure 3. Chicago Text Lab sample, 1898&amp;ndash;1949" src="/static/img/chicago1900-1949.png" /></p>
<p>If we break our model down into smaller, half-century segments, we can still see the downward trend continuing over the first half of the twentieth century. (Also interestingly, the model seems to be better at predicting bestsellerliness after about 1920.)</p>
<p><img alt="Figure 4. Chicago Text Lab sample, 1950&amp;ndash;1990" src="/static/img/chicago1950-1990.png" /></p>
<p>The trend flattens out over the latter half of the twentieth century, however. Whatever stylistic shifts were happening in the twentieth century, by 1950 they were mostly complete and things had mostly stabilized again. </p>
<p>What does this all represent in terms of literary history? My initial hunch was that we were seeing modernism&rsquo;s (and post-modernism&rsquo;s) break with Victorian, Edwardian, or Naturalist style. With the exception of (a very small) handful of Woolf, Hemingway, and Nabokov novels, though, our dataset of popular literature remains mostly void of what we&rsquo;d consider canonical modernist or postmodernist fiction. This doesn&rsquo;t rule out the possibility that modernist and postmodernist aesthetics influenced popular culture, though&mdash;I think it&rsquo;s undeniable they have. Another possibility is that these trends represent a shift in post-War American feeling or imagination. These are just some ideas I&rsquo;m throwing out there. Something interesting is clearly going on based on these trends: it will take a lot more (rigorous) study to make some more solid hypotheses.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:novel">
<p>The research described here was funded by <a href="http://novel-tm.ca">the NovelTM project</a>.&#160;<a class="footnote-backref" href="#fnref:novel" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:1">
<p>Altick, Richard D. <em>The English Common Reader: A Social History of the Mass Reading Public 1800-1900</em>. Chicago: University of Chicago Press, 1957.<br /><br />
Hackett, Alice Payne and James Henry Burke. <em>80 Years of Best Sellers 1895&ndash;1975</em>. New York: R. R. Bowker Company, 1977.<br /><br />
Leavis, Q. D. <em>Fiction and the Reading Public</em>. 1935. New York: Russell &amp; Russell, 1965.&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Thanks to Jordan for his thorough notes which highlighted Hackett&rsquo;s, Leavis&rsquo;s, and Altick&rsquo;s own descriptions of their projects.&#160;<a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>
      </article>
    
  </section>
  <section class="blog-nav">
    <center>
      
      <a class="dead_button">Newer</a>
      
      
      <a class="page_button" href="/pages/2/">Older</a>
      
    </center>
  </section>

      <footer>
        <p class="footer">Built with <i class="fa fa-heart red"></i> using Python and Flask. <a href="http://github.com/kylerjohnston/another-static-flask-blog">View the source code on Github</a>.</p>
        <p class="footer">All content copyright <i class="fa fa-copyright"></i> 2015&ndash;<span id="current-year"></span> Kyle Johnston and released under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
      </footer>
    </div>
    
    <script type="text/javascript" src="/static/gen/packed.js?3e5a9f68"></script>
    
    
<script id="dsq-count-scr" src="//kylerjohnston.disqus.com/count.js" async></script>

    <script async>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-70778406-1', 'auto');
ga('send', 'pageview');

    </script>
  </body>
</html>